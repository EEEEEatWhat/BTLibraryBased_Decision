<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="Attack_outpost">
    <ReactiveSequence>
      <NavStatus/>
      <Fallback>
        <IfGoEnemyOutpost/>
        <GoEnemyOutpost/>
      </Fallback>
    </ReactiveSequence>
  </BehaviorTree>

  <BehaviorTree ID="Attack_robot">
    <Sequence>
      <Fallback>
        <IfGoEnemyDoor/>
        <GoEnemyDoor/>
      </Fallback>
      <IfFindEnemy/>
      <GoEnemyNearby/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="Defence_home">
    <ReactiveSequence>
      <NavStatus/>
      <Patrol/>
      <Fallback>
        <IfFindEnemy/>
        <SearchEnemy/>
      </Fallback>
    </ReactiveSequence>
  </BehaviorTree>

  <BehaviorTree ID="Defence_outpost_door">
    <ReactiveSequence>
      <NavStatus/>
      <Fallback>
        <IfGoOurOutpost/>
        <GoOurOutpost/>
      </Fallback>
      <Fallback>
        <IfFindEnemy/>
        <SearchEnemy/>
      </Fallback>
    </ReactiveSequence>
  </BehaviorTree>

  <BehaviorTree ID="maintree">
    <Sequence>
      <SetOwnStatus/>
      <GameStatusCheck/>
      <IfThenElse>
        <IsDeadCheck/>
        <Sequence>
          <RebornNow/>
          <SendSentrycmd topic_name="/sentry_cmd"/>
        </Sequence>
        <Sequence>
          <ResetResData/>
          <SendSentrycmd topic_name="/sentry_cmd"/>
        </Sequence>
      </IfThenElse>
      <IsDeadCheck/>
      <Fallback>
        <HPCheck hp_threshold="200"/>
        <Inverter>
          <SupplyZoneCheck/>
        </Inverter>
        <ReactiveSequence>
          <SetSupplyGoal/>
          <Fallback>
            <IsArrived/>
            <SendGoal action_name="/BehaviorTreePose"/>
          </Fallback>
          <GainBlood/>
        </ReactiveSequence>
      </Fallback>
      <IfThenElse>
        <CheckArmors topic_name="/tracker/target"/>
        <FireOrSkip/>
        <Sequence>
          <SetEnemyGoal/>
          <SendGoal action_name="/BehaviorTreePose"/>
        </Sequence>
      </IfThenElse>
      <Fallback>
        <OurOutpostCheck/>
        <SetOwnStatus/>
      </Fallback>
      <IsOpenStageStrategySet/>
      <Fallback>
        <IsArrived/>
        <SendGoal action_name="/BehaviorTreePose"/>
      </Fallback>
      <GameRunning/>
      <Sequence>
        <Fallback>
          <IfGoKeystoneHeights/>
          <GoKeystoneHeights/>
        </Fallback>
        <Fallback>
          <IfFindEnemy/>
          <SearchEnemy/>
        </Fallback>
      </Sequence>
      <GameLastStage/>
      <IfThenElse>
        <IsSetGameStatusAsLast/>
        <ExecuteCommand/>
      </IfThenElse>
    </Sequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="CheckArmors"
            editable="true">
      <input_port name="topic_name"
                  default="/tracker/target"/>
    </Action>
    <Action ID="ExecuteCommand"
            editable="true"/>
    <Action ID="FireOrSkip"
            editable="true"/>
    <Action ID="GainBlood"
            editable="true"/>
    <Condition ID="GameLastStage"
               editable="true"/>
    <Condition ID="GameRunning"
               editable="true"/>
    <Condition ID="GameStatusCheck"
               editable="true"/>
    <Action ID="GoEnemyDoor"
            editable="true"/>
    <Action ID="GoEnemyNearby"
            editable="true"/>
    <Action ID="GoEnemyOutpost"
            editable="true"/>
    <Action ID="GoKeystoneHeights"
            editable="true"/>
    <Action ID="GoOurOutpost"
            editable="true"/>
    <Condition ID="HPCheck"
               editable="true">
      <input_port name="hp_threshold"
                  default="300"/>
    </Condition>
    <Condition ID="IfFindEnemy"
               editable="true"/>
    <Condition ID="IfGoEnemyDoor"
               editable="true"/>
    <Condition ID="IfGoEnemyOutpost"
               editable="true"/>
    <Condition ID="IfGoKeystoneHeights"
               editable="true"/>
    <Condition ID="IfGoOurOutpost"
               editable="true"/>
    <Condition ID="IsArrived"
               editable="true"/>
    <Condition ID="IsDeadCheck"
               editable="true"/>
    <Condition ID="IsOpenStageStrategySet"
               editable="true"/>
    <Condition ID="IsSetGameStatusAsLast"
               editable="true"/>
    <Condition ID="NavStatus"
               editable="true"/>
    <Condition ID="OurOutpostCheck"
               editable="true"/>
    <Action ID="Patrol"
            editable="true"/>
    <Condition ID="RebornNow"
               editable="true"/>
    <Condition ID="ResetResData"
               editable="true"/>
    <Action ID="SearchEnemy"
            editable="true"/>
    <Action ID="SendGoal"
            editable="true"/>
      <input_port name="action_name"
            default="/BehaviorTreePose"/>
    <Action ID="SendSentrycmd"
            editable="true">
      <input_port name="topic_name"
                  default="/sentry_cmd"/>
    </Action>
    <Condition ID="SetEnemyGoal"
               editable="true"/>
    <Action ID="SetOwnStatus"
            editable="true"/>
    <Condition ID="SetSupplyGoal"
               editable="true"/>
    <Condition ID="SupplyZoneCheck"
               editable="true"/>
  </TreeNodesModel>

</root>
